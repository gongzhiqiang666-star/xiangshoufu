# APP开发计划 - 享收付

## 文档信息

| 项目 | 内容 |
|-----|------|
| **项目名称** | 享收付APP |
| **版本** | v1.0.0 |
| **最后更新** | 2025-01-19 |
| **开发框架** | Flutter 3.x |
| **UI组件库** | Bruno（贝壳找房）|

---

## 一、项目概述

### 1.1 项目背景

享收付是一款面向支付代理商的分润管理移动应用，帮助代理商：
- 查看实时分润收益
- 管理终端设备（POS机）
- 管理下级代理和商户
- 查看钱包和提现
- 接收业务通知

### 1.2 目标平台

| 平台 | 最低版本 | 状态 |
|------|---------|------|
| iOS | 12.0+ | 🚧 开发中 |
| Android | 5.0+ (API 21) | 🚧 开发中 |
| HarmonyOS | 3.0+ | 📋 计划中 |

### 1.3 技术选型

| 类别 | 技术 | 说明 |
|------|------|------|
| 框架 | Flutter 3.x | 跨平台 |
| UI组件 | **Bruno** | 贝壳找房开源，中国本土化 |
| 状态管理 | Riverpod 2.0 | 类型安全 |
| 路由 | go_router | 声明式路由 |
| 网络 | Dio | HTTP客户端 |
| 图表 | fl_chart | 原生图表 |
| 推送 | 极光推送 | 国内推送 |

---

## 二、开发进度

### 2.1 总体进度

```
[███████░░░░░░░░░░░░░] 35%
```

### 2.2 模块进度

| 模块 | 状态 | 进度 | 备注 |
|------|------|------|------|
| **项目框架** | ✅ 完成 | 100% | 目录结构、主题、路由 |
| **设计系统** | ✅ 完成 | 100% | 颜色、字体、间距 |
| **认证模块** | 🚧 进行中 | 50% | 登录页面已完成 |
| **首页** | 🚧 进行中 | 80% | 布局完成，待接口 |
| **终端管理** | 🚧 进行中 | 70% | 列表/划拨完成 |
| **货款代扣** | 📋 待开发 | 20% | 页面框架 |
| **商户管理** | 📋 待开发 | 20% | 页面框架 |
| **钱包** | 🚧 进行中 | 60% | 列表完成 |
| **收益统计** | 📋 待开发 | 10% | 占位页面 |
| **数据分析** | 📋 待开发 | 10% | 占位页面 |
| **代理拓展** | 📋 待开发 | 10% | 占位页面 |
| **消息通知** | 📋 待开发 | 10% | 占位页面 |
| **营销海报** | 📋 待开发 | 10% | 占位页面 |
| **我的信息** | 📋 待开发 | 10% | 占位页面 |

---

## 三、开发计划

### Phase 1: 基础框架 ✅ 已完成

**时间**: 第1周

| 任务 | 状态 | 说明 |
|------|------|------|
| Flutter项目初始化 | ✅ | pubspec.yaml |
| 目录结构规划 | ✅ | features分层 |
| 设计系统实现 | ✅ | 颜色/字体/间距 |
| 主题配置 | ✅ | AppTheme |
| 路由配置 | ✅ | go_router |
| 底部导航 | ✅ | MainScaffold |

### Phase 2: 认证模块

**时间**: 第2周（0.5周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 登录页面UI | ✅ | 手机号+验证码 |
| 验证码倒计时 | 📋 | 60秒倒计时 |
| Token管理 | 📋 | 安全存储 |
| 自动登录 | 📋 | Token刷新 |
| 退出登录 | 📋 | 清理数据 |

### Phase 3: 首页模块

**时间**: 第2周（0.5周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 今日收益卡片 | ✅ | BrnEnhanceNumberCard |
| 分润明细网格 | ✅ | 2x2网格 |
| 快捷入口 | ✅ | 4x2网格 |
| 最近交易 | ✅ | 交易列表 |
| 轮播图 | 🚧 | BrnBannerWidget |
| 下拉刷新 | 🚧 | RefreshIndicator |
| 接口对接 | 📋 | API调用 |

### Phase 4: 终端管理

**时间**: 第3周（1.5周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 终端统计 | ✅ | 4个统计卡片 |
| 终端列表 | ✅ | Tab筛选 |
| 终端卡片 | ✅ | SN/商户/状态 |
| 终端划拨页面 | ✅ | 选择代理商 |
| 货款代扣设置 | ✅ | 可选设置 |
| 终端回拨 | 📋 | 类似划拨 |
| 批量设置 | 📋 | 费率/押金/流量卡 |
| 接口对接 | 📋 | API调用 |

### Phase 5: 货款代扣

**时间**: 第4周（0.5周）

| 任务 | 状态 | 说明 |
|------|------|------|
| Tab切换 | ✅ | 待接收/进行中/已完成 |
| 代扣卡片 | 📋 | 进度条显示 |
| 接收/拒绝 | 📋 | 操作按钮 |
| 接口对接 | 📋 | API调用 |

### Phase 6: 商户管理

**时间**: 第4周（1周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 商户列表 | 📋 | 直营/团队Tab |
| 商户搜索 | 📋 | 名称/编号/机具号 |
| 商户卡片 | 📋 | 交易额/状态 |
| 商户详情 | 📋 | 基本信息/统计 |
| 费率修改 | 📋 | 弹窗修改 |
| 交易记录 | 📋 | 列表展示 |
| 交易图表 | 📋 | 7天趋势 |

### Phase 7: 钱包模块

**时间**: 第5周（1周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 总资产卡片 | ✅ | 渐变背景 |
| 钱包列表 | ✅ | 分润/服务费/奖励 |
| 通道筛选 | ✅ | Dropdown |
| 申请提现 | 📋 | 金额/确认/结果 |
| 钱包流水 | 📋 | 列表+筛选 |
| 提现记录 | 📋 | 状态跟踪 |

### Phase 8: 收益统计

**时间**: 第6周（0.5周）

| 任务 | 状态 | 说明 |
|------|------|------|
| 今日收益 | 📋 | 趋势对比 |
| 收益明细 | 📋 | 4类分润 |
| 收益趋势图 | 📋 | 7天/30天 |
| 月收益列表 | 📋 | 6月/1年/2年 |

### Phase 9: 其他模块

**时间**: 第6-7周（2周）

| 模块 | 任务 |
|------|------|
| **数据分析** | 交易统计、代理排名、商户分析 |
| **代理拓展** | 二维码、邀请链接、添加代理 |
| **消息通知** | 消息列表、分类筛选、未读标记 |
| **营销海报** | 海报列表、分类、保存相册 |
| **我的信息** | 个人信息、结算卡、邀请码 |

### Phase 10: 联调测试

**时间**: 第8-9周（2周）

| 任务 | 说明 |
|------|------|
| API接口联调 | 与后端对接 |
| 功能测试 | 全流程验证 |
| 兼容性测试 | iOS/Android多设备 |
| 性能优化 | 启动速度、内存占用 |
| Bug修复 | 问题跟踪 |
| 发布准备 | 应用商店审核材料 |

---

## 四、Bruno组件使用指南

### 4.1 页面与组件对应表

| 页面/功能 | Bruno组件 | 用途 |
|----------|----------|------|
| 首页-今日收益 | `BrnEnhanceNumberCard` | 大额数字展示 |
| 首页-轮播图 | `BrnBannerWidget` | 图片轮播 |
| 列表筛选 | `BrnSelectionView` | 多条件筛选 |
| 日期选择 | `BrnDatePicker` | 日期范围 |
| 确认弹窗 | `BrnDialogManager` | 确认/取消 |
| 空状态 | `BrnAbnormalStateWidget` | 无数据提示 |
| 下拉刷新 | `BrnRefreshView` | 刷新+加载更多 |
| 通知栏 | `BrnNoticeBar` | 消息提示 |
| 表单输入 | `BrnTextInputFormItem` | 带验证输入框 |
| 底部Tab | `BrnBottomTabBar` | 5个Tab导航 |

### 4.2 Bruno主题配置

```dart
// main.dart
BrnInitializer.register(
  allThemeConfig: BrnAllThemeConfig(
    commonConfig: BrnCommonConfig(
      brandPrimary: Color(0xFF2563EB),
      brandPrimaryTap: Color(0xFF1D4ED8),
      brandSuccess: Color(0xFF10B981),
      brandWarning: Color(0xFFF59E0B),
      brandError: Color(0xFFEF4444),
    ),
  ),
);
```

---

## 五、相关文档

| 文档 | 路径 | 说明 |
|------|------|------|
| APP设计稿 | [APP设计稿.md](./APP设计稿.md) | 页面线框图 |
| APP详细设计 | [APP详细设计文档.md](./APP详细设计文档.md) | 技术详细设计 |
| 业务逻辑 | [业务逻辑梳理.md](./业务逻辑梳理.md) | 业务规则 |
| 代码目录 | [mobileapp/](../mobileapp/) | Flutter源码 |

---

## 六、风险与问题

### 6.1 待解决问题

| 问题 | 优先级 | 状态 |
|------|--------|------|
| Flutter环境安装 | P0 | 待处理 |
| Bruno组件熟悉 | P1 | 进行中 |
| API接口文档 | P0 | 待后端提供 |
| 推送服务配置 | P2 | 待规划 |

### 6.2 依赖项

| 依赖 | 来源 | 状态 |
|------|------|------|
| API接口 | 后端团队 | 🚧 开发中 |
| UI资源 | 设计 | ✅ 已提供 |
| 测试账号 | 运营 | 📋 待申请 |

---

*文档版本: v1.0*
*最后更新: 2025-01-19*
